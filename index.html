<!DOCTYPE html>
<html>
<head>
  <title>Live Streams</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; }
    header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 16px; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.1);
      position: sticky; top: 0; z-index: 100;
    }
    #streams {
      display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 20px; padding: 20px;
    }
    .stream {
      background: #fff; border-radius: 8px; overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2); transition: transform 0.2s ease;
    }
    .stream:hover { transform: translateY(-4px); }
    iframe { width: 100%; height: 180px; border: none; display: block; }
    .title { padding: 10px; font-weight: bold; font-size: 14px; }
    .meta { padding: 0 10px 10px; font-size: 12px; color: #555; }
  </style>
</head>
<body>
  <header>
    <div class="logo">▶ YouTube <span>Live</span></div>
  </header>

  <div id="streams"></div>

  <script>
    const API_KEY = "YOUR_YOUTUBE_API_KEY"; // ← Replace with your API key
    const CHANNELS = [
      { id: "UCcDcRFXX2wEAQQcX88zOYfA", name: "WarlordGamingNow" },
      { id: "UC09gfxgap1eKxIKwNjwedYQ", name: "InvaderPsycho" },
      { id: "UCxLrSgg2Khs5Fc71GMvIKNQ", name: "The Destined Gamer" },
      { id: "UCmaUnINXzcFXbro2X4huKEQ", name: "RCade" },
      { id: "UCkI-24m6t-DkbCN4EprozlA", name: "SahilBeast" },
      { id: "UCt9blnRkIpyCAAXViMbCh1Q", name: "Guts Gaming" }
    ];

    const container = document.getElementById('streams');

    async function fetchChannelData(channel) {
      // 1. Get subscriber count
      const channelRes = await fetch(
        `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${channel.id}&key=${API_KEY}`
      );
      const channelData = await channelRes.json();
      const subs = channelData.items[0]?.statistics?.subscriberCount || 0;

      // 2. Find if channel is live and get video ID
      const searchRes = await fetch(
        `https://www.googleapis.com/youtube/v3/search?part=id&channelId=${channel.id}&eventType=live&type=video&key=${API_KEY}`
      );
      const searchData = await searchRes.json();
      const liveVideoId = searchData.items[0]?.id?.videoId;

      let viewers = null;
      if (liveVideoId) {
        // 3. Get live viewer count
        const videoRes = await fetch(
          `https://www.googleapis.com/youtube/v3/videos?part=liveStreamingDetails&id=${liveVideoId}&key=${API_KEY}`
        );
        const videoData = await videoRes.json();
        viewers = videoData.items[0]?.liveStreamingDetails?.concurrentViewers || 0;
      }

      // 4. Add card
      const div = document.createElement('div');
      div.className = 'stream';
      div.innerHTML = `
        <iframe src="https://www.youtube.com/embed/live_stream?channel=${channel.id}" allowfullscreen></iframe>
        <div class="title">${channel.name}</div>
        <div class="meta">Subs: ${Number(subs).toLocaleString()}${viewers !== null ? ` | Viewers: ${viewers}` : ''}</div>
      `;
      container.appendChild(div);
    }

    CHANNELS.forEach(ch => fetchChannelData(ch));
  </script>
</body>
</html>

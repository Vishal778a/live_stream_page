<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YouTube Live Dashboard</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #181818;
    color: white;
  }
  header {
    padding: 10px;
    background: #202020;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }
  input, button {
    padding: 8px;
    border: none;
    border-radius: 4px;
  }
  input {
    flex: 1;
  }
  button {
    background: red;
    color: white;
    cursor: pointer;
  }
  .grid {
    display: grid;
    gap: 15px;
    padding: 15px;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }
  .card {
    background: #202020;
    border-radius: 8px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }
  .card iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
  }
  .controls {
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .controls input[type=range] {
    width: 70%;
  }
  .remove-btn {
    background: #444;
    border: none;
    color: white;
    padding: 5px 10px;
    cursor: pointer;
  }
</style>
</head>
<body>

<header>
  <input type="text" id="videoUrl" placeholder="Paste YouTube video/live link">
  <button onclick="addVideo()">Add Stream</button>
</header>

<div class="grid" id="videoGrid"></div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
let players = {};
let defaultVideos = [
  "https://www.youtube.com/watch?v=3dYHHUVVQmc",
  "https://www.youtube.com/watch?v=5qap5aO4i9A",
  "https://www.youtube.com/watch?v=jfKfPfyJRdk"
];

function extractVideoId(url) {
  let match = url.match(/(?:v=|\/embed\/|\.be\/)([a-zA-Z0-9_-]{11})/);
  return match ? match[1] : null;
}

function addVideo(url) {
  if (!url) url = document.getElementById("videoUrl").value;
  let videoId = extractVideoId(url);
  if (!videoId) {
    alert("Invalid YouTube link");
    return;
  }

  let cardId = "player_" + videoId + "_" + Date.now();
  let card = document.createElement("div");
  card.className = "card";
  card.innerHTML = `
    <div id="${cardId}"></div>
    <div class="controls">
      <input type="range" min="0" max="100" value="50" onchange="setVolume('${cardId}', this.value)">
      <button class="remove-btn" onclick="removeVideo('${cardId}')">Remove</button>
    </div>
  `;
  document.getElementById("videoGrid").appendChild(card);

  players[cardId] = { videoId: videoId, player: null };
  onYouTubeIframeAPIReadySingle(cardId, videoId);

  document.getElementById("videoUrl").value = "";
}

function removeVideo(cardId) {
  document.getElementById(cardId).parentElement.remove();
  if (players[cardId] && players[cardId].player) {
    players[cardId].player.destroy();
  }
  delete players[cardId];
}

function onYouTubeIframeAPIReadySingle(cardId, videoId) {
  players[cardId].player = new YT.Player(cardId, {
    height: "200",
    width: "100%",
    videoId: videoId,
    playerVars: { controls: 1 },
    events: {
      'onReady': event => event.target.setVolume(50)
    }
  });
}

function setVolume(cardId, volume) {
  if (players[cardId] && players[cardId].player) {
    players[cardId].player.setVolume(volume);
  }
}

function onYouTubeIframeAPIReady() {
  defaultVideos.forEach(url => addVideo(url));
}
</script>

</body>
</html>
